<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Debugging &middot; cert-issuer
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/cert-issuer/public/css/poole.css">
  <link rel="stylesheet" href="/cert-issuer/public/css/syntax.css">
  <link rel="stylesheet" href="/cert-issuer/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/cert-issuer/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/cert-issuer/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/site_config/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/cert-issuer/">
          cert-issuer
        </a>
        </h1>
      <p class="lead">A Blockchain Certificates Project</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/cert-issuer/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//about/">About</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//bitcoin_faq/">Bitcoin FAQ</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//blockchain_info/">Blockchain.info instructions</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//creating_cert/">Creating a certificate</a>
          
        
      
        
          
            <a class="sidebar-nav-item active" href="/cert-issuer//debugging/">Debugging</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//docker/">Quick start with Docker</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//issuing/">Issuing Certificates</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//live/">Live issuing</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//make_addresses/">Creating Issuing and Revocation Addresses</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//options/">Options</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//precommit/">Pre-commit Hooks</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//privacy/">Privacy Notes</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//system_overview/">System Overview</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//testing/">Tests</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/cert-issuer//v1_deployments/">Findings from our V1 Deployments</a>
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/blockchain-certificates/cert-issuer">GitHub project</a>
      <span class="sidebar-nav-item">Currently v0.0.1</span>
    </nav>

    <p>&copy; 2016. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Debugging</h1>
  <h2>Which client</h2>

<p>In general, it was easiest to run bitcoind locally. Running it in regtest mode (without real money) is the safest,
easiest way to experiment with building a bitcoin app. This project&#39;s docker container is configured this way.</p>

<h2>Bitcoind</h2>

<h3>Importing addresses</h3>

<p>Addresses must be converted to hash160 to import them. This tool was helpful <a href="http://bitcoinvalued.com/tools.php">http://bitcoinvalued.com/tools.php</a></p>

<h3>Creating addresses</h3>

<p>Addresses can be created via commandline <code>bitcoin-cli getnewaddress</code>.</p>

<h2>Blockchain.info</h2>

<p>Many testing difficulties were related to different functionality in the old/new API, and also the legacy/new wallets available on
the web site. The differences were primarily around the ability to import addresses (more difficult in the new versions). After experimentation, the legacy wallet UI combined with the new API provided all the functionality we needed.</p>

<h3>Creating addresses</h3>

<p>We used this client-side generator <a href="http://bitaddress.org/">http://bitaddress.org/</a></p>

<h3>Debugging error responses</h3>

<p>Each API call and error is logged by cert-issuer. If the error message isn&#39;t obvious, it&#39;s often easiest to try the
API call that was logged via curl and so you can tweak the call and get answers with faster turnaround.</p>

<p>The most common errors were:</p>

<ul>
<li>addresses not belonging to the expected wallet </li>
<li>api permissions not being set in the wallet</li>
</ul>

<h4>Make sure you request &#39;Create wallet&#39; permissions when getting a Blockchain.info api key</h4>

<p>Your api key needs this permission to use cert-issuer. If you messed this up, just request another one.</p>

<p>After you get an api key, open your wallet in the webapp (in legacy format -- reason below), and choose &#39;enable api
access&#39; in Advanced Settings</p>

<h4>Example Error: &quot;Authorization Required&quot;</h4>

<blockquote>
<p>{&quot;initial_error&quot;:&quot;Authorization Required. Please check your email.&quot;...}
{&quot;error&quot;:&quot;Wallets that require email authorization are currently not supported in the Wallet API. Please disable
this in your wallet settings, or add the IP address of this server to your wallet IP whitelist.&quot;}</p>
</blockquote>

<p>Even after enabling API access in your wallet (via the legacy UI), you need to add your IP address to the IP
Whitelist in your wallet. See &#39;Security &gt; Settings &gt; Advanced Settings &gt; IP Whitelist&#39;.</p>

<p>This was a great error message!</p>

<h4>Example Error: &quot;Address not found in wallet&quot;</h4>

<p>cert-issuer needs the ability to spend from issuing address, and from a storage address (if you are using that).</p>

<p>I couldn&#39;t find a way to import addresses with the new Blockchain.info wallet and API. This ability was present in
the legacy versions. You can work around this by using the legacy wallet, which allows you to import addresses. On the
&#39;import/export&#39; tab, use &#39;import private key&#39;</p>

<h2>Looking up transactions</h2>

<p>You can validate your transaction before sending by looking it up by rawtx at blockchain.info. Example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">   curl 'https://blockchain.info/rawtx/45a9306dfe99820eb346bb17ae0b64173ac11cac2d0e4227c7a7cacbcc0bad31?cors=true'
</code></pre></div>
</div>

    </div>

  </body>
</html>
